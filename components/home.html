<!-- FULL-BLEED HERO CAROUSEL — shows full image (no cropping), auto-swipe + dots -->
<section id="hero-carousel" class="w-full">
  <div class="relative w-full overflow-hidden">

    <!-- VIEWPORT (full-bleed) -->
    <div id="carousel-viewport" class="overflow-hidden w-full">
      <div id="carousel-track" class="flex transition-transform duration-700 ease-out">

        <!-- Slide 1 -->
        <div class="slide flex-shrink-0" style="flex:0 0 100%;">
          <!-- NOTE: width:100% height:auto ensures the image is shown entirely -->
          <img src="components/1.jpeg" alt="Slide 1" class="w-full h-auto object-contain object-center block" />
        </div>

        <!-- Slide 2 -->
        <div class="slide flex-shrink-0" style="flex:0 0 100%;">
          <img src="components/1.jpeg" alt="Slide 2" class="w-full h-auto object-contain object-center block" />
        </div>

        <!-- optional Slide 3 -->
        <div class="slide flex-shrink-0" style="flex:0 0 100%;">
          <img src="components/1.jpg" alt="Slide 3" class="w-full h-auto object-contain object-center block" />
        </div>

      </div>
    </div>

    <!-- Dots (bottom center) -->
    <div id="carousel-dots" class="absolute bottom-4 left-0 right-0 flex justify-center gap-3 z-40"></div>
  </div>
</section>

<script>
(function () {
  const track = document.getElementById('carousel-track');
  const dotsWrap = document.getElementById('carousel-dots');
  const viewport = document.getElementById('carousel-viewport');
  const slides = Array.from(track.querySelectorAll('.slide'));
  if (!slides.length) return;

  // Use viewport width (container width) for slide sizing — fixes oversize/zoom issues
  function refreshSlideSizes() {
    const vw = viewport.clientWidth || document.documentElement.clientWidth;
    slides.forEach(s => { s.style.width = vw + 'px'; });
  }

  // initial
  refreshSlideSizes();
  // if page layout changes/resizes
  window.addEventListener('resize', refreshSlideSizes);

  // create dots
  let activeIndex = 0;
  slides.forEach((_, i) => {
    const btn = document.createElement('button');
    btn.className = 'w-3 h-3 rounded-full bg-white/80 border border-white/30';
    btn.setAttribute('aria-label', 'Go to slide ' + (i + 1));
    btn.addEventListener('click', () => { goTo(i); resetTimer(); });
    dotsWrap.appendChild(btn);
  });
  const dots = Array.from(dotsWrap.children);

  function updateDots() {
    dots.forEach((d, idx) => {
      d.style.opacity = idx === activeIndex ? '1' : '0.45';
      d.style.transform = idx === activeIndex ? 'scale(1.15)' : 'scale(1)';
    });
  }

  function goTo(i) {
    activeIndex = ((i % slides.length) + slides.length) % slides.length;
    const offset = (viewport.clientWidth || document.documentElement.clientWidth) * activeIndex;
    track.style.transform = `translateX(-${offset}px)`;
    updateDots();
  }

  // autoplay
  let timer = null;
  function startTimer() { timer = setInterval(() => goTo(activeIndex + 1), 4500); }
  function resetTimer() { clearInterval(timer); startTimer(); }
  startTimer();

  // pause on hover (desktop)
  viewport.addEventListener('mouseenter', () => clearInterval(timer));
  viewport.addEventListener('mouseleave', resetTimer);

  // swipe support
  let startX = 0, deltaX = 0;
  const threshold = 50;
  viewport.addEventListener('touchstart', e => { clearInterval(timer); startX = e.touches[0].clientX; }, { passive: true });
  viewport.addEventListener('touchmove', e => { deltaX = e.touches[0].clientX - startX; }, { passive: true });
  viewport.addEventListener('touchend', () => {
    if (Math.abs(deltaX) > threshold) {
      if (deltaX < 0) goTo(activeIndex + 1);
      else goTo(activeIndex - 1);
    }
    startX = 0; deltaX = 0;
    resetTimer();
  });

  // small timeout to ensure images load and layout stabilizes
  setTimeout(() => { refreshSlideSizes(); goTo(0); }, 80);
})();
</script>

